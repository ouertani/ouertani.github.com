<!DOCTYPE html>
<html lang="en">
<!-- Beautiful Jekyll 5.0.0 | Copyright Dean Attali 2020 -->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  

  

  <title>Rest with Scala and Vert.x</title>

  
  <meta name="author" content="Slim Ouertani">
  

  <meta name="description" content="A previous post introduced some features of using Scala with Vert.x. This post covers how to publish Rest web services in an elegant and simple fashion. As in the previous post, Examples in Java and Scala are presented, source code been hosted on GitHub as part of lang-scala https://github.com/ouertani/vert.x/tree/master/vertx-lang/vertx-lang-scala I-...">

  

  

  <link rel="alternate" type="application/rss+xml" title="Ouertani Personal Blog" href="/feed.xml">

  

  

  


  
    
      
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">


    
      
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css">


    
      
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic">


    
      
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800">


    
  

  
    
      <link rel="stylesheet" href="/assets/css/bootstrap-social.css">
    
      <link rel="stylesheet" href="/assets/css/beautifuljekyll.css">
    
  

  

  
  
  

  

  
  <meta property="og:site_name" content="Ouertani Personal Blog">
  <meta property="og:title" content="Rest with Scala and Vert.x">
  <meta property="og:description" content="A previous post introduced some features of using Scala with Vert.x. This post covers how to publish Rest web services in an elegant and simple fashion. As in the previous post, Examples in Java and Scala are presented, source code been hosted on GitHub as part of lang-scala https://github.com/ouertani/vert.x/tree/master/vertx-lang/vertx-lang-scala I-...">

  
  <meta property="og:image" content="/assets/img/avatar-icon.png">
  

  
  <meta property="og:type" content="article">
  <meta property="og:article:author" content="Slim Ouertani">
  <meta property="og:article:published_time" content="2013-03-09T00:24:00-05:00">
  <meta property="og:url" content="/blog/2013/03/09/rest-with-scala-and-vert-dot-x/">
  <link rel="canonical" href="/blog/2013/03/09/rest-with-scala-and-vert-dot-x/">
  

  
  <meta name="twitter:card" content="summary">
  
  <meta name="twitter:site" content="@ouertani">
  <meta name="twitter:creator" content="@ouertani">

  <meta property="twitter:title" content="Rest with Scala and Vert.x">
  <meta property="twitter:description" content="A previous post introduced some features of using Scala with Vert.x. This post covers how to publish Rest web services in an elegant and simple fashion. As in the previous post, Examples in Java and Scala are presented, source code been hosted on GitHub as part of lang-scala https://github.com/ouertani/vert.x/tree/master/vertx-lang/vertx-lang-scala I-...">

  
  <meta name="twitter:image" content="/assets/img/avatar-icon.png">
  

  


  

  

</head>


<body>

  


  <nav class="navbar navbar-expand-xl navbar-light fixed-top navbar-custom top-nav-regular"><a class="navbar-brand" href="">Ouertani Personal Blog</a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="main-navbar">
    <ul class="navbar-nav ml-auto">
          <li class="nav-item">
            <a class="nav-link" href="/aboutme">About Me</a>
          </li></ul>
  </div>

  

  
    <div class="avatar-container">
      <div class="avatar-img-border">
        <a href="">
          <img alt="Navigation bar avatar" class="avatar-img" src="/assets/img/avatar-icon.png" />
        </a>
      </div>
    </div>
  

</nav>


  <!-- TODO this file has become a mess, refactor it -->







<header class="header-section ">

<div class="intro-header no-img">
  <div class="container-md">
    <div class="row">
      <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
        <div class="post-heading">
          <h1>Rest with Scala and Vert.x</h1>
          

          
            <span class="post-meta">Posted on March 9, 2013</span>
            
            
          
        </div>
      </div>
    </div>
  </div>
</div>
</header>





<div class=" container-md ">
  <div class="row">
    <div class=" col-xl-8 offset-xl-2 col-lg-10 offset-lg-1 ">

      

      

      <article role="main" class="blog-post">
        <p>A previous post introduced some features of using Scala with <a href="http://vertx.io/">Vert.x</a>. This post covers how to publish Rest web services in an elegant and simple fashion.</p>

<p>As in the previous post, Examples in Java and Scala are presented, source code been hosted on GitHub as part of lang-scala <a href="https://github.com/ouertani/vert.x/tree/master/vertx-lang/vertx-lang-scala">https://github.com/ouertani/vert.x/tree/master/vertx-lang/vertx-lang-scala</a>
<!-- more --></p>

<h2>I- Resticle</h2>

<p>Resticle is a unit of deployment dedicated to Rest. It provides a new method (“handles”) which can be used by Vert.x to start Rest services. “handles” returns a sequence of rest handlers :</p>

<ul>
<li>RestHandler : Action =&gt; Response</li>
<li>Action :</li><ul>
<li>GET(pattern : String)</li>
<li>POST (pattern : String)</li>
<li>PUT (pattern : String)</li>
<li>DELETE(pattern : String)</li>
<li>HEAD (pattern : String)</li>
<li>ALL(pattern : String)</li>
</ul>
<li>Response : HttpServerRequest =&gt; Any</li>
<li>OK, Unauthorized,....</li>
</ul>
<p>In this tutorial we will be working with the SampleResticle class, for both scala and java.</p>

<h2>II - Hello World</h2>

<p>Vert.x provides a powerful routing and <a href="http://vertx.io/core_manual_java.html#routing-http-requests-with-pattern-matching">route matching</a> mechanism, which simplifies the routing of HTTP requests to different handlers based on pattern matching on the request path.</p>

<p>In Hello World snippet, let us publish a static GET service :</p>

<li>GET : /hello → code : 200 , body : world</li>
<h4>Scala</h4>

<p>```	scala	SampleResticle.scala
class SampleResticle extends Resticle
{
  override def handles =
         { GET(“/hello”)      :&gt;  OK( _ =&gt; “world “) }
}</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;h4&gt;Java&lt;/h4&gt;
```	java	SampleResticle.java			
public class SampleResticle extends Verticle {

    public void start() {
        HttpServer server = vertx.createHttpServer();
        RouteMatcher routeMatcher = new RouteMatcher();
        routeMatcher.get("/hello", new Handler&lt;HttpServerRequest&gt;() {
            public void handle(HttpServerRequest req) {
                req.response.statusCode =200;
                req.response.end("world");
            }
        });
        server.requestHandler(routeMatcher).listen(8080, "localhost");
    }
}
</code></pre></div></div>
<h2>III- Chaining Handlers</h2>

<p>Using Resticle we can chain handlers quit easily. The following snippets create static GET and DELETE services :</p>

<li>GET : /hello → code : 200 , body : world</li>
<li>DELETE : /posts → code : 401 , body : Not allowed user</li>
<h4>Scala</h4>

<p>```	scala	SampleResticle.scala				
class SampleResticle extends Resticle
{
  override def handles =
         { GET(“/hello”)      :&gt;  OK( _ =&gt; “world “) } ++
         { DELETE(“/posts”)   :&gt;  Unauthorized {_ =&gt; “Not allowed user” }}
}</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;h4&gt;java&lt;/h4&gt;

```	java	SampleResticle.java				
public class SampleResticle extends Verticle {

    public void start() {
        HttpServer server = vertx.createHttpServer();
        RouteMatcher routeMatcher = new RouteMatcher();
        routeMatcher.get("/hello", new Handler&lt;HttpServerRequest&gt;() {
            public void handle(HttpServerRequest req) {
                req.response.statusCode =200;
                req.response.end("world");
            }
        });
         routeMatcher.delete("/posts", new Handler&lt;HttpServerRequest&gt;() {
            public void handle(HttpServerRequest req) {
                req.response.statusCode =401;
                req.response.end("Not allowed user");
            }
        });
        server.requestHandler(routeMatcher).listen(8080, "localhost");
    }
}
</code></pre></div></div>
<h2>IV - Value path</h2>

<p>Vert.x <a href="http://vertx.io/core_manual_java.html#routing-http-requests-with-pattern-matching">pattern matching</a> lets you extract values from the path and use them as parameters in the request.</p>

<li>GET : /hello → code : 200 , body : world</li>
<li>DELETE : /posts → code : 401 , body : Not allowed user</li>
<li>POST : /:blogname → code : 200 , body : post {blogname} received !</li>

<h4>Scala : ( Using <a href="http://docs.scala-lang.org/overviews/core/string-interpolation.html">String interpolation</a>)</h4>

<p>```	scala	SampleResticle.scala				
class SampleResticle extends Resticle
{
  override def handles =
         { GET(“/hello”)      :&gt;  OK( _ =&gt; “world “) } ++
         { DELETE(“/posts”)   :&gt;  Unauthorized {_ =&gt; “Not allowed user” }} ++
         { POST(“/:blogname”) :&gt;  OK {req  =&gt; val param = req.params().get(“blogname”) ; s”post $param received !” } }
}</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;h4&gt;Java&lt;/h4&gt;

```	java	SampleResticle.java				
public class SampleResticle extends Verticle {

    public void start() {
        HttpServer server = vertx.createHttpServer();
        RouteMatcher routeMatcher = new RouteMatcher();
        routeMatcher.get("/hello", new Handler&lt;HttpServerRequest&gt;() {
            public void handle(HttpServerRequest req) {
                req.response.statusCode =200;
                req.response.end("world");
            }
        });
         routeMatcher.delete("/posts", new Handler&lt;HttpServerRequest&gt;() {
            public void handle(HttpServerRequest req) {
                req.response.statusCode =401;
                req.response.end("Not allowed user");
            }
        });

         routeMatcher.post("/:blogname", new Handler&lt;HttpServerRequest&gt;() {
            public void handle(HttpServerRequest req) {
                req.response.statusCode =200;
                String blogName = req.params().get("blogname");
                req.response.end("post "+blogName+ " received !");
            }
        });

        server.requestHandler(routeMatcher).listen(8080, "localhost");
    }
}
</code></pre></div></div>
<h2>V- Json</h2>

<p>Let’s assume we have a Blog class with two String fields title and content :</p>

<p>case class Blog (title :String , content : String)
The java equivalent has been relocated to the end of the document due to its verbosity ;).</p>

<p>Publishing an object using Resticle is simple and transparent due to implicit convertor : T =&gt; Buffer.</p>

<h4>Scala ( Type Class)</h4>
<p>```	scala	Blog.scala
object Blog {
  implicit def toBuffer(blog : Blog):Buffer = JsonObject.withString(“title” -&gt; blog.title).withString(“content” -&gt; blog.content)
}</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;h4&gt;Java ( with explicit convertor )&lt;/h4&gt;

```	java	Convertor.java				
public class Convertor {
    public static  JsonObject toJson(Blog blog) {
       return new JsonObject().putString("title", blog.getTitle()).putString("content", blog.getContent());
    }
}
</code></pre></div></div>
<li>GET : /hello → code : 200 , body : world</li>
<li>DELETE : /posts → code : 401 , body : Not allowed user</li>
<li>POST : /:blogname → code : 200 , body : post {blogname} received !</li>
<li>GET : /:id → code : 200 , body : {"title":"rest","content":"scala &amp; vertx"}</li>
<h4>Scala</h4>

<p>```	scala	SampleResticle.scala				
class SampleResticle extends Resticle
{
  override def handles =
         { GET(“/hello”)      :&gt;  OK( _ =&gt; “world “) } ++
         { DELETE(“/posts”)   :&gt;  Unauthorized {_ =&gt; “Not allowed user” }} ++
         { POST(“/:blogname”) :&gt;  OK {req  =&gt; val param = req.params().get(“blogname”) ; s”post $param received !” } } ++
         { GET(“/:id”)        :&gt;  OK ( _ =&gt; Blog(“rest”,”scala &amp; vertx”))}
}</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;h4&gt;Java&lt;/h4&gt;

```	java	SampleResticle.java				
public class SampleResticle extends Verticle {

    public void start() {
        HttpServer server = vertx.createHttpServer();
        RouteMatcher routeMatcher = new RouteMatcher();
        routeMatcher.get("/hello", new Handler&lt;HttpServerRequest&gt;() {
            public void handle(HttpServerRequest req) {
                req.response.statusCode =200;
                req.response.end("world");
            }
        });
         routeMatcher.delete("/posts", new Handler&lt;HttpServerRequest&gt;() {
            public void handle(HttpServerRequest req) {
                req.response.statusCode =401;
                req.response.end("Not allowed user");
            }
        });

         routeMatcher.post("/:blogname", new Handler&lt;HttpServerRequest&gt;() {
            public void handle(HttpServerRequest req) {
                req.response.statusCode =200;
                String blogName = req.params().get("blogname");
                req.response.end("post "+blogName+ " received !");
            }
        });

        routeMatcher.get("/:id", new Handler&lt;HttpServerRequest&gt;() {
            public void handle(HttpServerRequest req) {
                req.response.statusCode =200;
                Blog blog =  new Blog("rest","scala &amp; vertx");
                JsonObject obj = Convertor.toJson(blog);
                req.response.end(obj.encode());
            }
        });

        server.requestHandler(routeMatcher).listen(8080, "localhost");
    }
}
</code></pre></div></div>
<p>Java Blog</p>

<p>```	java	Blog.java				
public class Blog {</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>private final  String title;
private final String content;

public Blog(String title, String content) {
    this.title = title;
    this.content = content;
}

public String getTitle() {
    return title;
}

public String getContent() {
    return content;
}   } ```
</code></pre></div></div>
<h2>Conclusion</h2>

<p>Despite the fact that Resticle is in first development step, Rest support is by far simpler and elegant in scala than in java. As described in first tutorial Vert.x java version is burdened with a frightening number of handlers. Will Vert.x 2.0 address this point using <a href="https://github.com/vert-x/vert.x/wiki/Vert.x-2.0-plan">Promises/Deferred APIs </a>?</p>

      </article>

      

      

      
        <!-- Check if any share-links are active -->




<section id = "social-share-section">
  <span class="sr-only">Share: </span>

  
    <a href="https://twitter.com/intent/tweet?text=Rest+with+Scala+and+Vert.x&url=%2Fblog%2F2013%2F03%2F09%2Frest-with-scala-and-vert-dot-x%2F"
      class="btn btn-social-icon btn-twitter" title="Share on Twitter">
      <span class="fab fa-fw fa-twitter" aria-hidden="true"></span>
      <span class="sr-only">Twitter</span>
    </a>
  

  
    <a href="https://www.facebook.com/sharer/sharer.php?u=%2Fblog%2F2013%2F03%2F09%2Frest-with-scala-and-vert-dot-x%2F"
      class="btn btn-social-icon btn-facebook" title="Share on Facebook">
      <span class="fab fa-fw fa-facebook" aria-hidden="true"></span>
      <span class="sr-only">Facebook</span>
    </a>
  

  
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=%2Fblog%2F2013%2F03%2F09%2Frest-with-scala-and-vert-dot-x%2F"
      class="btn btn-social-icon btn-linkedin" title="Share on LinkedIn">
      <span class="fab fa-fw fa-linkedin" aria-hidden="true"></span>
      <span class="sr-only">LinkedIn</span>
    </a>
  

  

</section>



      

      <ul class="pagination blog-pager">
        
        <li class="page-item previous">
          <a class="page-link" href="/blog/2013/02/12/fun-with-scala-and-vert-dot-x/" data-toggle="tooltip" data-placement="top" title="Fun with Scala and Vert.x">&larr; Previous Post</a>
        </li>
        
        
      </ul>
      
  
  
  

  




    </div>
  </div>
</div>


  <footer>
  <div class="container-md beautiful-jekyll-footer">
    <div class="row">
      <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
      <ul class="list-inline text-center footer-links"><li class="list-inline-item">
    <a href="/feed.xml" title="RSS">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">RSS</span>
    </a>
  </li><li class="list-inline-item">
    <a href="mailto:ouertani@gmail.com" title="Email me">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">Email me</span>
   </a>
  </li><li class="list-inline-item">
    <a href="https://github.com/ouertani" title="GitHub">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fab fa-github fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">GitHub</span>
   </a>
  </li><li class="list-inline-item">
    <a href="https://twitter.com/ouertani" title="Twitter">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">Twitter</span>
   </a>
  </li></ul>

      
      <p class="copyright text-muted">
      
        Slim Ouertani
        &nbsp;&bull;&nbsp;
      
      2021

      

      
      </p>
      <p class="theme-by text-muted">
        Powered by
        <a href="https://beautifuljekyll.com">Beautiful Jekyll</a>
      </p>
      </div>
    </div>
  </div>
</footer>


  
  
    
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>


  
    
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>


  
    
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>


  



  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script src="/assets/js/beautifuljekyll.js"></script>
    
  









</body>
</html>
